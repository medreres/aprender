{% extends 'aprender/index.html' %}
{% load static %}
{% block head %}
<style>
	.set {
		display: block;
		margin-left: 10vw;
	}

	.blur {
		position: absolute;
		border: 1px solid black;
		backdrop-filter: blur(5px);
		z-index: 1;

		left: 0;
		top: 0;
		height: 100%;
		width: 100%;
		display: flex;
		flex-flow: column;
		justify-content: center;
		align-items: center;
	}

	.menuContainer {
		background-color: grey;
		border: 1px solid red;
		position: relative;

	}

	.flip-card-front,
	.flip-card-back {
		position: absolute;
		width: 100%;
		height: 100%;
		-webkit-backface-visibility: hidden;
		/* Safari */
		backface-visibility: hidden;
	}
</style>
{% if not learnStarted %}
<script>
	function createLearnPath() {
		const idOfSet = url.pathname.substring(url.pathname.lastIndexOf('/') + 1);
		// create set and reload page
		fetch(`${url.origin}/${idOfSet}/createLearnPath`)
			.then(response => {
				location.reload();
			})
	}
</script>
{%endif %}
<script>
	function flip(evt) {
		document.querySelector('.flip-card').classList.toggle('flipped');
	}

	function loadNextWord() {
		const idOfSet = url.pathname.substring(url.pathname.lastIndexOf('/') + 1);
		fetch(`${path}/sets/${idOfSet}/fetchWord`)
		.then(response => response.json())
		.then(result => {
			console.log(result);
		})
	}

	function loadPrevWord() {

	}
</script>
{% endblock head %}
{% block body %}
<style>
	.flip-card {
		background-color: transparent;
		width: 100%;
		height: 100%;
		border: 1px solid #f1f1f1;
		perspective: 1000px;
		/* Remove this if you don't want the 3D effect */
	}

	.flip-card:hover {
		cursor: pointer;
	}

	/* This container is needed to position the front and back side */
	.flip-card-inner {
		position: relative;
		width: 100%;
		height: 100%;
		text-align: center;
		transition: transform 0.8s;
		transform-style: preserve-3d;
	}

	/* Do an horizontal flip when you move the mouse over the flip box container */
	.flip-card.flipped .flip-card-inner {
		transform: rotateY(180deg);
	}

	/* Position the front and back side */
	.flip-card-front,
	.flip-card-back {
		position: absolute;
		width: 100%;
		height: 100%;
		-webkit-backface-visibility: hidden;
		/* Safari */
		backface-visibility: hidden;

		display: flex;
		justify-content: center;
		align-items: center;
	}

	/* Style the front side (fallback if image is missing) */
	.flip-card-front {
		background-color: #bbb;
		color: black;
	}

	/* Style the back side */
	.flip-card-back {
		background-color: dodgerblue;
		color: white;
		transform: rotateY(180deg);
	}
</style>
<section class='set'>
	<h1>{{set.label}}</h1>
	<div class="menuContainer">
		<button type="button" class="btn btn-primary">Flashcards</button>
		<button type="button" class="btn btn-primary">Learn</button>
		<button type="button" class="btn btn-primary">Test</button>
		<button type="button" class="btn btn-primary">Match</button>
		<hr class="dropdown-divider">
		<!-- carousel for taking look at cards with words -->
		<div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item active" data-bs-interval="10000" style='height: 400px;' id='carouselItemOne'>
					<div class="flip-card" onclick='flip(event);'>
						<div class="flip-card-inner">
							<div class="flip-card-front">
								<h3>Some word</h3>
							</div>
							<div class="flip-card-back">
								its definition
							</div>
						</div>
					</div>
				</div>
				<div class="carousel-item" data-bs-interval="2000" style='height: 400px;' id='carouselItemTwo'>
					<p>some text here again</p>
				</div>
			</div>
			<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval"
				data-bs-slide="prev" onclick='loadPrevWord();'>
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval"
				data-bs-slide="next" onclick='loadNextWord();'>
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="visually-hidden">Next</span>
			</button>
		</div>
		{% if not learnStarted %}
		<!-- blurring div in case learn program hasn't been created yet  -->
		<div class='blur'>
			<p> Opps! It's seems that you haven't create your learning way yet!</p>
			<p>Click <button onclick="createLearnPath();" class="btn bg-primary">Create</button> to start studying term
				right off the bat!</p>
		</div>
		{% endif %}
	</div>
	<hr class="dropdown-divider">
	<div>
		Created by user, his photo, at the reight icons for adding this set fo a folder, editing the set or sharing
	</div>
	<div>
		here start sections with cards , words on them, pagintaion for 10-15 carcs per page, search bar
		Each card must have word, definitoin, button to add to favorites, edit btn, photo (optional)
	</div>
</section>
{% endblock body %}